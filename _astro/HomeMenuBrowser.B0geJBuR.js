import{d as re,n as me,e as H,o as ge,p as ne,a as o,g as d,t as v,s as A,i as a,F as q,q as T,b as V,u as z,r as Z,m as ve,v as fe,S as L,j as M,f as X,w as he,l as $e,k as ee}from"./dev.CiFu84Wg.js";import{S as ie,D as p,M as te,F as xe}from"./FullscreenViewerSwiper.C5nru6ap.js";import"./_restaurant_.6f04fe89.Cfz2rqAZ.js";import"./pagination.CeHDqKQv.js";import"./hash-navigation.CsTBY9Op.js";import"./autoplay.oimAbWlb.js";/* empty css                              */var be=v('<div class="w-full sticky -mt-px top-[calc(env(safe-area-inset-top)+3.97rem)] z-[600] bg-main-alpha-95 transform-gpu transition-colors ease-out duration-200 px-2"role=region aria-label="Menu categories"><div class=relative><div class="flex gap-1 items-center overflow-x-auto no-scrollbar snap-x snap-mandatory px-2 py-4"role=listbox aria-label=Categories data-scrollable>'),_e=v('<div class="shrink-0 snap-start"role=option><button type=button class="rounded-md flex min-h-[40px] max-h-[40px] select-none items-center justify-center text-[12px] font-medium leading-tight text-center shadow-sm px-3 py-2 transition-colors"><span class="block break-words text-center">');const ye=t=>{let g;const _=`menu-cat-${me()}`,y=ie.LAST_CATEGORY_ID,c=`${y}::${t.restaurantId}`,[E,$]=H(void 0);function w(e){if(!e||!g)return!1;const l=g.querySelectorAll("button[data-category-id]");let s;if(l.forEach(x=>{!s&&x.getAttribute("data-category-id")===e&&(s=x)}),!s)return!1;try{s.scrollIntoView({behavior:"instant",block:"nearest",inline:"center"})}catch{s.scrollIntoView({behavior:"auto",block:"nearest",inline:"center"})}return!0}const k=e=>()=>{$(e);try{localStorage.setItem(c,e)}catch{}try{t.onSelect&&t.onSelect(e)}catch{}};return ge(()=>{let e=t.activeCategoryId??"";if(!w(e)){let l="";try{if(l=localStorage.getItem(c)||"",!l){const s=localStorage.getItem(y)||"";if(s){l=s;try{localStorage.setItem(c,s)}catch{}}}}catch{}l&&(w(l),e=l)}if(e){$(e);try{t.onSelect&&t.onSelect(e)}catch{}}}),ne(()=>{const e=t.activeCategoryId;e&&e!==E()&&($(e),t.preserveScrollOnActiveChange||w(e))}),o(L,{get when(){return ve(()=>!!t.categories)()&&t.categories.length>0},get children(){var e=d(be),l=e.firstChild,s=l.firstChild,x=g;return typeof x=="function"?fe(x,e):g=e,A(e,"id",_),a(s,o(q,{get each(){return t.categories},children:f=>(()=>{var S=d(_e),D=S.firstChild,G=D.firstChild;return T(D,"click",k(f.id),!0),a(G,()=>f.label),V(u=>{var r=f.label,n=E()===f.id?"true":"false",i=f.id,m={"bg-second text-main hover:opacity-90 active:opacity-80":E()===f.id,"bg-main text-second-alpha border border-second-alpha-40 hover:opacity-90 active:opacity-80":E()!==f.id};return r!==u.e&&A(S,"aria-label",u.e=r),n!==u.t&&A(S,"aria-selected",u.t=n),i!==u.a&&A(D,"data-category-id",u.a=i),u.o=z(D,m,u.o),u},{e:void 0,t:void 0,a:void 0,o:void 0}),Z(),S})()})),V(()=>A(e,"data-provided-active",t.activeCategoryId??"")),e}})};re(["click"]);var we=v('<span class="text-[10px] px-2 py-0.5 rounded-full align-text-top relative -top-1"style=color:#90FFB7>NEW'),Se=v('<div class="text-sm font-bold flex-shrink-0 text-right"><span><!$><!/><!$><!/>K'),Ce=v('<div class="text-xs text-second-alpha-60"data-viewer-desc>'),Ie=v('<div class=w-full><div class="p-3 flex flex-col min-w-0 bg-main"><div class="flex gap-2 mb-1"><h3 class="text-sm font-bold text-second w-full"data-viewer-title><!$><!/><!$><!/></h3><!$><!/></div><!$><!/>');const pe=t=>(()=>{var g=d(Ie),_=g.firstChild,y=_.firstChild,c=y.firstChild,E=c.firstChild,[$,w]=M(E.nextSibling),k=$.nextSibling,[e,l]=M(k.nextSibling),s=c.nextSibling,[x,f]=M(s.nextSibling),S=y.nextSibling,[D,G]=M(S.nextSibling);return a(c,()=>t.item.name,$,w),a(c,o(L,{get when(){return t.item?.isNew},get children(){return d(we)}}),e,l),a(y,o(L,{get when(){return t.item.price},get children(){var u=d(Se),r=u.firstChild,n=r.firstChild,[i,m]=M(n.nextSibling),b=i.nextSibling,[h,C]=M(b.nextSibling);return h.nextSibling,a(r,()=>t.pricePrefix,i,m),a(r,()=>t.item?.price,h,C),u}}),x,f),a(_,o(L,{get when(){return t.item.description},get children(){var u=d(Ce);return a(u,()=>t.item?.description),u}}),D,G),g})();var Ae=v('<div class="text-second-alpha-80 text-center text-sm mb-4 p-4 bg-third-alpha-20 rounded-lg">'),Ee=v('<div class="pb-20 space-y-6">'),W=v("<div>"),Le=v('<div class="text-second/60 text-sm">No menu items available.'),Me=v('<div><div class="cursor-zoom-in focus:outline-none focus-visible:ring-2 focus-visible:ring-second"role=button tabindex=0>'),ke=v('<div class="flex gap-2 items-center"><svg xmlns=http://www.w3.org/2000/svg width=12 height=12 viewBox="0 0 16 16"fill=none><path d="M16 8L4 14.9282L4 1.0718L16 8Z"fill=currentColor></path></svg><h3 class="text-sm font-semibold text-second/90">'),De=v('<p class="text-second-alpha-60 mt-4 mb-6 italic"style=font-size:0.6rem>'),Fe=v('<section class=mb-6><div class="mb-4 mt-2"><!$><!/><!$><!/></div><!$><!/>'),Oe=v("<div><div role=button tabindex=0>");const Re=t=>{const g=()=>t.menuCategoryAndItems?.segments||[],_=()=>Array.isArray(g())&&g().length>0,y=X(()=>_()?g().flatMap(r=>r?.items||[]).filter(r=>!!r&&!r?.disabled):(t.menuCategoryAndItems.items||[]).filter(r=>!r?.disabled)),c=()=>y(),E=X(()=>g().filter(r=>!r?.disabled).map(r=>({...r,items:(r.items||[]).filter(n=>!n?.disabled)}))),$=()=>_()?{...t.menuCategoryAndItems,items:y()}:t.menuCategoryAndItems,w=()=>t.displayMode??p.LARGE,k=r=>r===p.SMALL?"grid grid-cols-2 gap-x-3 gap-y-8 px-3":r===p.MEDIUM?"grid grid-cols-2 gap-x-3 gap-y-8":"grid grid-cols-1 gap-y-10",e=()=>{const r=t.displayMode??p.LARGE;return k(r)},l=r=>n=>{const i=n.target,m=i&&i.closest?i.closest("[data-viewer-index]"):null;if(m&&(n.key==="Enter"||n.key===" ")){n.preventDefault();const b=m.getAttribute("data-viewer-index")||"0",h=Number(b)||0;m.dispatchEvent(new CustomEvent("open-item-viewer",{detail:{index:h},bubbles:!0}))}},s=r=>n=>{const i=n.target,m=i&&i.closest?i.closest("[data-viewer-index]"):null;if(!m)return;const b=m.getAttribute("data-viewer-index")||"0",h=Number(b)||0;m.dispatchEvent(new CustomEvent("open-item-viewer",{detail:{index:h},bubbles:!0}))},[x,f]=H(!1),[S,D]=H(0),G=r=>{if(!document||r<0||r>=c().length)return;const n=document.querySelector(`[data-id="item-${r}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},u=r=>{let n=0;for(let i=0;i<r;i++){const m=g()?.[i]?.items||[];n+=m.filter(b=>!b?.disabled).length}return n};return ne(he(()=>[t.menuCategoryAndItems?.id,t.menuCategoryAndItems?.title,c().length],()=>{c().length!==0&&requestAnimationFrame(()=>requestAnimationFrame(()=>G(0)))},{defer:!0})),(()=>{var r=d(W);return T(r,"open-item-viewer",n=>{const i=typeof n.detail?.index=="number"?n.detail.index:0;D(i),f(!0)}),a(r,o(L,{get when(){return c().length>0},get fallback(){return d(Le)},get children(){return[o(L,{get when(){return $()?.description},get children(){var n=d(Ae);return V(()=>$e(n,"innerHTML",$().description)),n}}),o(L,{get when(){return _()},get fallback(){return(()=>{var n=d(W);return a(n,o(q,{get each(){return c()},children:(i,m)=>{const b=m(),h=w();return(()=>{var C=d(Me),O=C.firstChild;return A(C,"data-id",`item-${b}`),T(O,"keydown",l(),!0),T(O,"click",s(),!0),A(O,"data-viewer-index",b),a(O,o(te,{item:i,layout:h})),V(F=>{var j={"col-span-2":h===p.LARGE,"rounded-md overflow-hidden":h===p.SMALL},Y=`View ${i.name} in full screen`;return F.e=z(C,j,F.e),Y!==F.t&&A(O,"aria-label",F.t=Y),F},{e:void 0,t:void 0}),Z(),C})()}})),V(()=>ee(n,"pb-20 "+e())),n})()},get children(){var n=d(Ee);return a(n,o(q,{get each(){return E()},children:(i,m)=>{const b=u(m());return(()=>{var h=d(Fe),C=h.firstChild,O=C.firstChild,[F,j]=M(O.nextSibling),Y=F.nextSibling,[le,ae]=M(Y.nextSibling),se=C.nextSibling,[oe,ce]=M(se.nextSibling);return a(C,o(L,{get when(){return i.title},get children(){var I=d(ke),K=I.firstChild,U=K.nextSibling;return a(U,()=>i.title),I}}),F,j),a(C,o(L,{get when(){return i.description},get children(){var I=d(De);return a(I,()=>i.description),I}}),le,ae),a(h,o(L,{get when(){return i.list_only},get fallback(){return(()=>{var I=d(W);return a(I,o(q,{get each(){return i.items||[]},children:(K,U)=>{const J=b+U(),B=i.layout??w();return(()=>{var P=d(Oe),N=P.firstChild;return A(P,"data-id",`item-${J}`),T(N,"keydown",l(),!0),T(N,"click",s(),!0),A(N,"data-viewer-index",J),a(N,o(te,{item:K,layout:B})),V(R=>{var de={"col-span-2":B===p.LARGE,"rounded-md overflow-hidden":B===p.SMALL},Q=`View ${K.name} in full screen`,ue={"rounded-md overflow-hidden":B===p.SMALL};return R.e=z(P,de,R.e),Q!==R.t&&A(N,"aria-label",R.t=Q),R.a=z(N,ue,R.a),R},{e:void 0,t:void 0,a:void 0}),Z(),P})()}})),V(()=>ee(I,k(i.layout??w()))),I})()},get children(){return o(q,{get each(){return i.items||[]},children:(I,K)=>o(pe,{get pricePrefix(){return i.price_prefix},item:I})})}}),oe,ce),h})()}})),n}}),o(xe,{get categoryAndItems(){return $()},get startIndex(){return S()},get isOpen(){return x()},onClose:n=>{f(!1),typeof n=="number"&&setTimeout(()=>G(n),100)}})]}})),r})()};re(["click","keydown"]);var Ve=v("<div><!$><!/><div class=pb-20>");const Pe=t=>{const g=ie.LAST_CATEGORY_ID,_=`${g}::${t.restaurantId}`,y=(()=>{if(t.activeCategoryId)return t.activeCategoryId;let e="";try{if(typeof window<"u"&&(e=localStorage.getItem(_)||"",!e)){const l=localStorage.getItem(g)||"";if(l){e=l;try{localStorage.setItem(_,l)}catch{}}}}catch{}return e&&(t.menu||[]).some(l=>l.id===e)?e:t.menu?.[0]?.id})(),[c,E]=H(y),$=()=>{const e=(t.menu||[]).find(l=>l.id===c());return e||{id:"",name:"",items:[],layout:p.LARGE}},w=()=>(t.menu||[]).map(e=>({id:e.id,label:e.name})),k=()=>$()?.layout??p.LARGE;return(()=>{var e=d(Ve),l=e.firstChild,[s,x]=M(l.nextSibling),f=s.nextSibling;return a(e,o(ye,{get categories(){return w()},get restaurantId(){return t.restaurantId},get activeCategoryId(){return c()},preserveScrollOnActiveChange:!0,onSelect:S=>{S!==c()&&E(S)}}),s,x),a(f,o(Re,{get menuCategoryAndItems(){return $()},get displayMode(){return k()}})),e})()};export{Pe as default};
